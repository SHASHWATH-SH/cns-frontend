{"ast":null,"code":"var _jsxFileName = \"E:\\\\secure-p2p-transfer\\\\frontend\\\\src\\\\Sender.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Sender = () => {\n  _s();\n  const pc = useRef(null);\n  const ws = useRef(null);\n  const [file, setFile] = useState(null);\n  const handleFileChange = e => {\n    setFile(e.target.files[0]);\n  };\n  const connectAndSend = () => {\n    ws.current = new WebSocket('wss://localhost:8080');\n    pc.current = new RTCPeerConnection();\n    pc.current.onicecandidate = event => {\n      if (event.candidate) {\n        ws.current.send(JSON.stringify({\n          type: 'candidate',\n          candidate: event.candidate\n        }));\n      }\n    };\n    const channel = pc.current.createDataChannel('file');\n    channel.onopen = () => {\n      if (file) {\n        file.arrayBuffer().then(buffer => {\n          channel.send(buffer);\n        });\n      }\n    };\n    pc.current.createOffer().then(offer => {\n      pc.current.setLocalDescription(offer);\n      ws.current.send(JSON.stringify({\n        type: 'offer',\n        offer\n      }));\n    });\n    ws.current.onmessage = event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'answer') {\n        pc.current.setRemoteDescription(new RTCSessionDescription(data.answer));\n      } else if (data.type === 'candidate') {\n        pc.current.addIceCandidate(new RTCIceCandidate(data.candidate));\n      }\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Sender\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: connectAndSend,\n      children: \"Send File\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Sender, \"1EBKPVi/9vJSE1GjLoaTm6zrtu8=\");\n_c = Sender;\nexport default Sender;\nvar _c;\n$RefreshReg$(_c, \"Sender\");","map":{"version":3,"names":["React","useRef","useState","jsxDEV","_jsxDEV","Sender","_s","pc","ws","file","setFile","handleFileChange","e","target","files","connectAndSend","current","WebSocket","RTCPeerConnection","onicecandidate","event","candidate","send","JSON","stringify","type","channel","createDataChannel","onopen","arrayBuffer","then","buffer","createOffer","offer","setLocalDescription","onmessage","data","parse","setRemoteDescription","RTCSessionDescription","answer","addIceCandidate","RTCIceCandidate","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","onClick","_c","$RefreshReg$"],"sources":["E:/secure-p2p-transfer/frontend/src/Sender.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\n\nconst Sender = () => {\n  const pc = useRef(null);\n  const ws = useRef(null);\n  const [file, setFile] = useState(null);\n\n  const handleFileChange = (e) => {\n    setFile(e.target.files[0]);\n  };\n\n  const connectAndSend = () => {\n    ws.current = new WebSocket('wss://localhost:8080');\n\n    pc.current = new RTCPeerConnection();\n\n    pc.current.onicecandidate = (event) => {\n      if (event.candidate) {\n        ws.current.send(JSON.stringify({ type: 'candidate', candidate: event.candidate }));\n      }\n    };\n\n    const channel = pc.current.createDataChannel('file');\n    channel.onopen = () => {\n      if (file) {\n        file.arrayBuffer().then((buffer) => {\n          channel.send(buffer);\n        });\n      }\n    };\n\n    pc.current.createOffer().then((offer) => {\n      pc.current.setLocalDescription(offer);\n      ws.current.send(JSON.stringify({ type: 'offer', offer }));\n    });\n\n    ws.current.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'answer') {\n        pc.current.setRemoteDescription(new RTCSessionDescription(data.answer));\n      } else if (data.type === 'candidate') {\n        pc.current.addIceCandidate(new RTCIceCandidate(data.candidate));\n      }\n    };\n  };\n\n  return (\n    <div>\n      <h2>Sender</h2>\n      <input type=\"file\" onChange={handleFileChange} />\n      <button onClick={connectAndSend}>Send File</button>\n    </div>\n  );\n};\n\nexport default Sender;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}