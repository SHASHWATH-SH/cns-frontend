{"ast":null,"code":"var _jsxFileName = \"E:\\\\secure-p2p-transfer\\\\frontend\\\\src\\\\Receiver.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Receiver = () => {\n  _s();\n  const pc = useRef(null);\n  const ws = useRef(null);\n  useEffect(() => {\n    ws.current = new WebSocket('wss://localhost:8080');\n    pc.current = new RTCPeerConnection();\n    pc.current.onicecandidate = event => {\n      if (event.candidate) {\n        ws.current.send(JSON.stringify({\n          type: 'candidate',\n          candidate: event.candidate\n        }));\n      }\n    };\n    pc.current.ondatachannel = event => {\n      const channel = event.channel;\n      channel.onmessage = e => {\n        const blob = new Blob([e.data]);\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'received_file';\n        a.click();\n      };\n    };\n    ws.current.onmessage = async event => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'offer') {\n        await pc.current.setRemoteDescription(new RTCSessionDescription(data.offer));\n        const answer = await pc.current.createAnswer();\n        await pc.current.setLocalDescription(answer);\n        ws.current.send(JSON.stringify({\n          type: 'answer',\n          answer\n        }));\n      } else if (data.type === 'candidate') {\n        pc.current.addIceCandidate(new RTCIceCandidate(data.candidate));\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Receiver\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Waiting for file...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(Receiver, \"OfAwAZUYpCdVloKW67ic9AdLOOI=\");\n_c = Receiver;\nexport default Receiver;\nvar _c;\n$RefreshReg$(_c, \"Receiver\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","Receiver","_s","pc","ws","current","WebSocket","RTCPeerConnection","onicecandidate","event","candidate","send","JSON","stringify","type","ondatachannel","channel","onmessage","e","blob","Blob","data","url","URL","createObjectURL","a","document","createElement","href","download","click","parse","setRemoteDescription","RTCSessionDescription","offer","answer","createAnswer","setLocalDescription","addIceCandidate","RTCIceCandidate","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/secure-p2p-transfer/frontend/src/Receiver.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\n\nconst Receiver = () => {\n  const pc = useRef(null);\n  const ws = useRef(null);\n\n  useEffect(() => {\n    ws.current = new WebSocket('wss://localhost:8080');\n\n    pc.current = new RTCPeerConnection();\n\n    pc.current.onicecandidate = (event) => {\n      if (event.candidate) {\n        ws.current.send(JSON.stringify({ type: 'candidate', candidate: event.candidate }));\n      }\n    };\n\n    pc.current.ondatachannel = (event) => {\n      const channel = event.channel;\n      channel.onmessage = (e) => {\n        const blob = new Blob([e.data]);\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'received_file';\n        a.click();\n      };\n    };\n\n    ws.current.onmessage = async (event) => {\n      const data = JSON.parse(event.data);\n      if (data.type === 'offer') {\n        await pc.current.setRemoteDescription(new RTCSessionDescription(data.offer));\n        const answer = await pc.current.createAnswer();\n        await pc.current.setLocalDescription(answer);\n        ws.current.send(JSON.stringify({ type: 'answer', answer }));\n      } else if (data.type === 'candidate') {\n        pc.current.addIceCandidate(new RTCIceCandidate(data.candidate));\n      }\n    };\n  }, []);\n\n  return (\n    <div>\n      <h2>Receiver</h2>\n      <p>Waiting for file...</p>\n    </div>\n  );\n};\n\nexport default Receiver;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}