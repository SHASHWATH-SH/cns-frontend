{"ast":null,"code":"var _jsxFileName = \"E:\\\\secure-p2p-transfer\\\\frontend\\\\src\\\\components\\\\Receiver.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { createPeerConnection, SIGNAL_SERVER } from '../utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Receiver() {\n  _s();\n  const [id] = useState(prompt('Enter Sender ID:'));\n  const [myId] = useState(Math.random().toString(36).substr(2, 8));\n  const wsRef = useRef(null);\n  const peerRef = useRef(null);\n  useEffect(() => {\n    const ws = new WebSocket(SIGNAL_SERVER);\n    wsRef.current = ws;\n    peerRef.current = createPeerConnection();\n    peerRef.current.onicecandidate = e => {\n      if (e.candidate) {\n        ws.send(JSON.stringify({\n          from: myId,\n          to: id,\n          ice: e.candidate\n        }));\n      }\n    };\n    ws.onmessage = async msg => {\n      const data = JSON.parse(msg.data);\n      if (data.offer) {\n        await peerRef.current.setRemoteDescription(new RTCSessionDescription(data.offer));\n        const answer = await peerRef.current.createAnswer();\n        await peerRef.current.setLocalDescription(answer);\n        ws.send(JSON.stringify({\n          from: myId,\n          to: id,\n          answer\n        }));\n      }\n      if (data.ice) {\n        await peerRef.current.addIceCandidate(data.ice);\n      }\n    };\n    peerRef.current.ondatachannel = event => {\n      const receiveChannel = event.channel;\n      receiveChannel.onmessage = e => {\n        console.log('File received:', e.data);\n      };\n    };\n  }, [id, myId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Receiver\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Listening for file from Sender ID: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 45\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Receiver, \"umXzIlcXzy3FDQVsiLkneXV+948=\");\n_c = Receiver;\nexport default Receiver;\nvar _c;\n$RefreshReg$(_c, \"Receiver\");","map":{"version":3,"names":["React","useEffect","useRef","useState","createPeerConnection","SIGNAL_SERVER","jsxDEV","_jsxDEV","Receiver","_s","id","prompt","myId","Math","random","toString","substr","wsRef","peerRef","ws","WebSocket","current","onicecandidate","e","candidate","send","JSON","stringify","from","to","ice","onmessage","msg","data","parse","offer","setRemoteDescription","RTCSessionDescription","answer","createAnswer","setLocalDescription","addIceCandidate","ondatachannel","event","receiveChannel","channel","console","log","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/secure-p2p-transfer/frontend/src/components/Receiver.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { createPeerConnection, SIGNAL_SERVER } from '../utils';\n\nfunction Receiver() {\n  const [id] = useState(prompt('Enter Sender ID:'));\n  const [myId] = useState(Math.random().toString(36).substr(2, 8));\n  const wsRef = useRef(null);\n  const peerRef = useRef(null);\n\n  useEffect(() => {\n    const ws = new WebSocket(SIGNAL_SERVER);\n    wsRef.current = ws;\n\n    peerRef.current = createPeerConnection();\n\n    peerRef.current.onicecandidate = e => {\n      if (e.candidate) {\n        ws.send(JSON.stringify({ from: myId, to: id, ice: e.candidate }));\n      }\n    };\n\n    ws.onmessage = async msg => {\n      const data = JSON.parse(msg.data);\n      if (data.offer) {\n        await peerRef.current.setRemoteDescription(new RTCSessionDescription(data.offer));\n        const answer = await peerRef.current.createAnswer();\n        await peerRef.current.setLocalDescription(answer);\n        ws.send(JSON.stringify({ from: myId, to: id, answer }));\n      }\n      if (data.ice) {\n        await peerRef.current.addIceCandidate(data.ice);\n      }\n    };\n\n    peerRef.current.ondatachannel = event => {\n      const receiveChannel = event.channel;\n      receiveChannel.onmessage = e => {\n        console.log('File received:', e.data);\n      };\n    };\n  }, [id, myId]);\n\n  return (\n    <div>\n      <h2>Receiver</h2>\n      <p>Listening for file from Sender ID: <b>{id}</b></p>\n    </div>\n  );\n}\n\nexport default Receiver;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}